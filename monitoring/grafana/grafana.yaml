---
apiVersion: helm.fluxcd.io/v1
kind: HelmRelease
metadata:
  name: grafana
  namespace: monitoring
  annotations:
    fluxcd.io/automated: "true"
    filter.fluxcd.io/chart-image: glob:*
spec:
  releaseName: grafana
  chart:
    repository: https://kubernetes-charts.storage.googleapis.com/
    name: grafana
    version: 5.0.13
  values:
    persistence:
      storageClassName: nfs
    sidecar:
      datasources:
        enabled: true
        label: grafana_datasource
      dashboards:
        enabled: true
        label: grafana_dashboard
    ingress:
      enabled: true
      hosts:
        - grafana.home.lab
      annotations:
        #external-dns.alpha.kubernetes.io/hostname: grafana.home.lab
        external-dns.alpha.kubernetes.io/target: traefik.home.lab

